// Generated by CoffeeScript 1.6.2
(function() {
  var delay, puts,
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  $(function() {
    var $allVideos, $fluidEl, hot_tags;

    $allVideos = $("iframe");
    $fluidEl = $("body");
    $allVideos.each(function() {
      return $(this).data('aspectRatio', this.height / this.width).removeAttr('height').removeAttr('width');
    });
    $(window).resize(function() {
      var newWidth;

      newWidth = $fluidEl.width();
      return $allVideos.each(function() {
        var $el;

        $el = $(this);
        return $el.width(newWidth).height(newWidth * $el.data('aspectRatio'));
      });
    });
    $(window).resize();
    $("pre").addClass("prettyprint");
    hot_tags = [];
    $("li#hot_tag").each(function() {
      return hot_tags.push($(this).text());
    });
    $(".pin-tag").each(function() {
      var _ref;

      if (_ref = $(this).text(), __indexOf.call(hot_tags, _ref) >= 0) {
        return $(this).parents(".pin-item").addClass("super_hot");
      }
    });
    $(".footnote").on("click", function() {
      var num;

      num = parseInt($(this).text());
      return $(".footnotes li").eq(num - 1).anim("attention");
    });
    return $(".reversefootnote").on("click", function() {
      var footnote;

      footnote = $(this).attr("href").replace(/fnref/, 'fn');
      return $("a.footnote").each(function() {
        var source;

        source = $(this).attr("href");
        if (footnote === source) {
          return $(this).parent().parent().anim("attention");
        }
      });
    });
  });

  puts = function(str) {
    return console.log(str);
  };

  delay = function(s, func) {
    return setTimeout(func, s * 1000);
  };

  $.fn.anim = function(anim) {
    var attentions, blob, entrances, exits, fast, index, slow, speed;

    entrances = ["flipInX", "flipInY", "fadeIn", "fadeInUp", "fadeInDown", "fadeInLeft", "fadeInRight", "fadeInUpBig", "fadeInDownBig", "fadeInLeftBig", "fadeInRightBig", "bounceIn", "bounceInDown", "bounceInUp", "bounceInLeft", "bounceInRight", "lightSpeedIn", "rollIn"];
    exits = ["flipOutX", "flipOutY", "fadeOut", "fadeOutUp", "fadeOutDown", "fadeOutLeft", "fadeOutRight", "fadeOutUpBig", "fadeOutDownBig", "fadeOutLeftBig", "fadeOutRightBig", "bounceOut", "bounceOutDown", "bounceOutUp", "bounceOutLeft", "bounceOutRight", "lightSpeedOut", "rollOut", "hinge"];
    attentions = ["bounce", "shake", "tada", "swing", "wobble", "wiggle", "pulse"];
    if (anim === "attention") {
      index = Math.floor(Math.random() * attentions.length);
      anim = attentions[index];
    } else if (anim === "enter") {
      index = Math.floor(Math.random() * entrances.length);
      anim = entrances[index];
    } else if (anim === "exit") {
      index = Math.floor(Math.random() * exits.length);
      anim = exits[index];
    }
    puts("animating " + anim);
    blob = this;
    blob.addClass("animated " + anim);
    fast = ["fadeOutLeftBig", "fadeOutRightBig", "bounceOutRight", "bounceOutLeft", "bounceOutUp", "bounceOutDown"];
    slow = ["hinge", "bounceOut"];
    if (__indexOf.call(fast, anim) >= 0) {
      speed = 0.75;
      puts("" + anim + " is a fast one");
    } else if (__indexOf.call(slow, anim) >= 0) {
      speed = 2;
      puts("" + anim + " is a slow one");
    } else {
      speed = 1;
    }
    return delay(speed, function() {
      return blob.removeClass("animated " + anim);
    });
  };

}).call(this);
